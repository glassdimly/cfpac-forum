!function(o){"object"==typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd&&define(o)}(function(){function n(o,r,s,e,t){return s(r&&r.rooms&&r.rooms.length)?"\r\n"+n.blocks.rooms(o,r,s,e,t)+"\r\n":'\r\n<li class="no_active"><a href="#">[[modules:chat.no_active]]</a></li>\r\n'}return n.blocks={rooms:function(e,t,n,o,m){return o(n(t&&t.rooms),function(s){return'\r\n<li class="'+(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].unread)?"unread":"")+'" data-roomid="'+e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].roomId))+'">\r\n\t<strong class="room-name">\r\n\t\t'+(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].lastUser&&t.rooms[s].lastUser.uid)?"\r\n\t\t"+(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].roomName)?e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].roomName)):e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].usernames)))+"\r\n\t\t":"\r\n\t\t<span>[[modules:chat.no-users-in-room]]</span>\r\n\t\t")+'\r\n\t</strong>\r\n\t<div class="avatar-placeholder"></div>\r\n\t'+o(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users),function(o,r){return"\r\n\t"+(0===r?'\r\n\t<div class="main-avatar">\r\n\t\t<a href="'+e.__escape(n(t&&t.config&&t.config.relative_path))+"/user/"+e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users&&t.rooms[s].users[o]&&t.rooms[s].users[o].userslug))+'">'+e.__escape(m(t,e,"buildAvatar",[n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users&&t.rooms[s].users[o]),"sm",n(t&&t.true)]))+"</a>\r\n\t</div>\r\n\t":"")+"\r\n\t"})+'\r\n\r\n\t<ul class="members">\r\n\t\t'+o(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users),function(o){return'\r\n\t\t<li>\r\n\t\t\t<a href="'+e.__escape(n(t&&t.config&&t.config.relative_path))+"/user/"+e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users&&t.rooms[s].users[o]&&t.rooms[s].users[o].userslug))+'">'+e.__escape(m(t,e,"buildAvatar",[n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].users&&t.rooms[s].users[o]),"sm",n(t&&t.true)]))+"</a>\r\n\t\t</li>\r\n\t\t"})+'\r\n\t</ul>\r\n\r\n\t<span class="teaser-content">'+e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].teaser&&t.rooms[s].teaser.content))+'</span>\r\n\t<span class="teaser-timestamp timeago pull-right" title="'+e.__escape(n(t&&t.rooms&&t.rooms[s]&&t.rooms[s].teaser&&t.rooms[s].teaser.timestampISO))+'"></span>\r\n</li>\r\n'})}},n});