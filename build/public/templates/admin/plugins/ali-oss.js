!function(t){"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd&&define(t)}(function(){return function(t,e,n,r,s){return'<h1><i class="fa fa-picture-o"></i> Aliyun OSS Configuration</h1>\r\n<hr/>\r\n\r\n<p>You can configure this plugin via a combination of the below, for instance, you can use <em>instance meta-data</em>\r\n\tand <em>environment variables</em> in combination. You can also specify values in the form below, and those will be\r\n\tstored in the database.</p>\r\n\r\n<h3>Environment Variables</h3>\r\n<pre><code>\r\nexport OSS_ACCESS_KEY_ID="xxxxx"\r\nexport OSS_SECRET_ACCESS_KEY="yyyyy"\r\nexport OSS_UPLOADS_BUCKET="zzzz"\r\nexport OSS_UPLOADS_HOST="host"\r\nexport OSS_UPLOADS_PATH="path"\r\n</code></pre>\r\n\r\n<p>\r\n\tAsset host and asset path are optional. You can leave these blank to default to the standard asset url -\r\n\thttp://mybucket.&lt;endpoint&gt;.aliyuncs.com/uuid.jpg.<br/>\r\n\tAsset host can be set to a custom asset host. For example, if set to cdn.mywebsite.com then the asset url is\r\n\thttp://cdn.mywebsite.com/uuid.jpg.<br/>\r\n\tAsset path can be set to a custom asset path. For example, if set to /assets, then the asset url is\r\n\thttp://mybucket.&lt;endpoint&gt;.aliyuncs.com/assets/uuid.jpg.<br/>\r\n\tIf both are asset host and path are set, then the url will be http://cdn.mywebsite.com/assets/uuid.jpg.\r\n</p>\r\n\r\n<h3>Instance meta-data</h3>\r\n<div class="alert alert-warning">\r\n\t<p>If you need help, create an <a href="https://github.com/ziofat/nodebb-plugin-ali-oss/issues">issue on\r\n\t\tGithub</a>.</p>\r\n</div>\r\n\r\n<h3>Database Stored configuration:</h3>\r\n<form id="ali-oss-bucket">\r\n\t<label for="ossbucket">Bucket</label><br/>\r\n\t<input type="text" id="ossbucket" name="bucket" value="'+t.__escape(n(e&&e.bucket))+'" title="OSS Bucket" class="form-control input-lg"\r\n\t       placeholder="OSS Bucket"><br/>\r\n\r\n\t<label for="osshost">Host</label><br/>\r\n\t<input type="text" id="osshost" name="host" value="'+t.__escape(n(e&&e.host))+'" title="OSS Host" class="form-control input-lg"\r\n\t       placeholder="website.com"><br/>\r\n\r\n\t<label for="osspath">Path</label><br/>\r\n\t<input type="text" id="osspath" name="path" value="'+t.__escape(n(e&&e.path))+'" title="OSS Path" class="form-control input-lg"\r\n\t       placeholder="/assets"><br/>\r\n\r\n\t<label for="oss-region">Region</label><br/>\r\n    <input type="text" id="oss-region" name="region" value="'+t.__escape(n(e&&e.region))+'" title="OSS Path" class="form-control input-lg"\r\n\t       placeholder="oss-cn-hangzhou"><br/>\r\n\t<br/>\r\n\r\n\t<button class="btn btn-primary" type="submit">Save</button>\r\n</form>\r\n\r\n<br><br>\r\n<form id="ali-oss-credentials">\r\n\t<label for="bucket">Credentials</label><br/>\r\n\t<div class="alert alert-warning">\r\n\t\tConfiguring this plugin using the fields below is <strong>NOT recommended</strong>, as it can be a potential\r\n\t\tsecurity issue. We highly recommend that you investigate using either <strong>Environment Variables</strong> or\r\n\t\t<strong>Instance Meta-data</strong>\r\n\t</div>\r\n\t<input type="text" name="accessKeyId" value="'+t.__escape(n(e&&e.accessKeyId))+'" maxlength="20" title="Access Key ID"\r\n\t       class="form-control input-lg" placeholder="Access Key ID"><br/>\r\n\t<input type="text" name="secretAccessKey" value="'+t.__escape(n(e&&e.secretAccessKey))+'" title="Secret Access Key"\r\n\t       class="form-control input-lg" placeholder="Secret Access Key"><br/>\r\n\t<button class="btn btn-primary" type="submit">Save</button>\r\n</form>\r\n\r\n<script>\r\n\t$(document).ready(function () {\r\n\r\n\t\t$(\'#aws-region option[value="'+t.__escape(n(e&&e.region))+'"]\').prop(\'selected\', true)\r\n\r\n\t\t$("#ali-oss-bucket").on("submit", function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tsave("osssettings", this);\r\n\t\t});\r\n\r\n\t\t$("#ali-oss-credentials").on("submit", function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar form = this;\r\n\t\t\tbootbox.confirm("Are you sure you wish to store your credentials for accessing OSS in the database?", function (confirm) {\r\n\t\t\t\tif (confirm) {\r\n\t\t\t\t\tsave("credentials", form);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tfunction save(type, form) {\r\n\t\t\tvar data = {\r\n\t\t\t\t_csrf: \''+t.__escape(n(e&&e.csrf))+"' || $('#csrf_token').val()\r\n\t\t\t};\r\n\r\n\t\t\tvar values = $(form).serializeArray();\r\n\t\t\tfor (var i = 0, l = values.length; i < l; i++) {\r\n\t\t\t\tdata[values[i].name] = values[i].value;\r\n\t\t\t}\r\n\r\n\t\t\t$.post('"+t.__escape(n(e&&e.forumPath))+"api/admin/plugins/ali-oss/' + type, data).done(function (response) {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tajaxify.refresh();\r\n\t\t\t\t\tapp.alertSuccess(response);\r\n\t\t\t\t}\r\n\t\t\t}).fail(function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tajaxify.refresh();\r\n\t\t\t\tapp.alertError(jqXHR.responseJSON ? jqXHR.responseJSON.error : 'Error saving!');\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n<\/script>\r\n"}});